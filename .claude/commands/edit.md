---
description: "既存ノートに内容を追記・編集する"
---

## 基本原則

**情報記録原則**: ユーザが発言した内容のみを体系的・構造的に記載し、解釈・考察・感想は一切追加しない。

**文章記述原則**: 極端に箇条書きを採用しない。箇条書きが多すぎると意見やアイデアが丸め込まれ、思考の流れや論理的なつながりが失われる。ユーザの思考を自然な文章形式で記録し、必要最小限の箇条書きのみ使用する。

**既存構造尊重原則**: 既存ノートの構造、リンク、フロントマターを尊重し、追記・編集時は既存の文脈と整合性を保つ。

## ワークフロー

### 1. 対象ノート特定・内容確認

**1.1 ノート特定**
- ユーザ指定のファイルパス
- 検索による特定：`mcp__zk-mcp__get_note_paths(include_str, include_tags, ...)`
- 曖昧な場合は候補を提示し、ユーザに選択を求める

**1.2 既存内容確認**
```
mcp__zk-mcp__get_note(path) # 現在の内容・構造・フロントマターを把握
```

### 2. 追記内容の明確化

ユーザの追記・編集意図を整理し、明確にする。内容が曖昧な場合は追加質問を行い、具体的で思慮深い内容に発展させる。

**重要**: 質問がある場合は次ステップに移らず、ユーザの回答を必ず待つ。

### 3. 編集実行

**3.1 ファイル内容再確認**

**⚠️ 重要**: ファイル編集前に必ず `Read` ツールでファイル内容を確認すること。Claude Codeの安全機能により、既存ファイルを変更する前にRead必須。

```
# 必須: ファイル内容確認
Read(file_path: "既存ノートのパス")
```

**3.2 編集実行**
```
Edit(
  - 既存構造を保持しつつ、適切な位置に新しい内容を追記
  - 必要に応じてタグ・エイリアス・extraフィールドを更新
  - draft: falseに更新（編集完了時）
)
```

**編集対象の考慮事項**:
- **FleetingNotes**: アイデアの発展・詳細化
- **PermanentNotes**: 新しい洞察・関連概念の追加
- **LiteratureNotes**: 章・セクションの追加内容・考察
- **StructureNotes**: 組織的情報の拡張・更新

### 4. 関連リンク更新（必要時）

**4.1 リンク関係確認**
```
mcp__zk-mcp__get_linking_notes(path) # 現在のリンク関係把握
```

**4.2 横断的リンク構築**
```
Read(file_path) # 関連ノート編集前の必須確認
Edit() # 必要に応じて相互リンク追加・更新
```

**4.3 完了報告**
編集完了とリンク更新状況をユーザに報告

## 対応ノートタイプ

- **FleetingNotes/**: 一時的思考の発展・詳細化
- **PermanentNotes/**: 洗練された知識の拡張
- **LiteratureNotes/**: 文献ノートの内容追加
- **StructureNotes/**: 組織的ノートの更新
- **StructureNotes/Literature/**: Root Literature Noteの情報更新