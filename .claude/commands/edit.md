---
description: "既存ノートに内容を追記・編集する"
allowed-tools: mcp__zk-mcp__*, Read, Edit, TodoWrite
argument-hint: [ファイルパス] [追記内容]
---

以下の手順で既存ノートの編集を行います：

## 1. 対象ノート特定・内容確認

引数が提供された場合は`$ARGUMENTS`を解析し、対象ファイルと編集内容を特定します。
提供されていない場合は、ユーザーと対話して以下を確認します：

- 編集対象のノートファイル（パス指定または検索による特定）
- 追記・編集したい内容

必要に応じて`mcp__zk-mcp__get_notes`で検索し、候補を提示してユーザーに選択を求めます。

## 2. 既存内容確認

`mcp__zk-mcp__get_note_content`で対象ノートの現在の内容・構造・フロントマターを確認し、編集方針を決定します。

## 3. 編集内容の明確化

ユーザーの追記・編集意図を整理し、以下の原則に従って内容を明確化します：

**情報記録原則**: ユーザが発言した内容のみを体系的・構造的に記載し、解釈・考察・感想は一切追加しない。

**文章記述原則**: 極端に箇条書きを採用せず、思考の流れや論理的なつながりを自然な文章形式で記録。

**既存構造尊重原則**: 既存ノートの構造、リンク、フロントマターを尊重し、既存の文脈と整合性を保つ。

## 4. 作業計画の提示と確認

編集の具体的な計画をユーザーに提示し、y/nで確認を取ります：
- 編集対象箇所
- 追記内容
- タグ・エイリアス・extraフィールドの更新内容
- 関連リンク更新の必要性

## 5. 編集実行

確認が取れたら以下を実行：

1. `Read`ツールでファイル内容を再確認
2. `Edit`ツールで既存構造を保持しつつ適切な位置に新しい内容を追記
3. 必要に応じてタグ・エイリアス・extraフィールドを更新
4. draft: falseに更新（編集完了時）

## 6. 関連リンク更新（必要時）

必要に応じて：
1. `mcp__zk-mcp__get_linked_by_notes`と`mcp__zk-mcp__get_link_to_notes`で関連ノートを確認
2. 横断的リンク構築のため関連ノートを更新

## 7. 完了報告

編集完了とリンク更新状況をユーザーに報告します。
